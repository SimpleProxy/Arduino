#!/bin/env sh

# Author: Kelves C.
# Version: 0.9
# License: Public Domain
# Description:
# Wrap up script to start all programs that compose the work evironment 
# when the xsession starts

kblayer 2> $(mktemp -t kblayer.log.XXX) &
xrdb $HOME/.Xresources 2> $(mktemp -t xrdb.log.XXX) &

[ $(pgrep -x xbanish) ] || setsid xbanish &

[ $(pgrep urxvtd) ] || urxvtd -q -o -f &

([ $(pgrep ranmoize-bg)] && killall ramdomize-bg) || randomize-bg \
    2> $(mktemp -t wall.log.XXX) &

compton --config=$XDG_CONFIG_HOME/compton/compton.conf \
    2> $(mktemp -t compton.log.XXX) &
Pid_of_Compton=$!

if ps -p $Pid_of_Compton >/dev/null;then
    sleep 1
    conky > /dev/null &
fi

if ps -p $Pid_of_Compton > /dev/null;then
    bar &
fi

unset $Pid_of_Compton
