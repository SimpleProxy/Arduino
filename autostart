#!/bin/env sh

# Author: Kelves C.
# Version: 0.8
# License: Public Domain
# Description:
# A simple script for wrap all programs
# that compose the working evironment 
# when the xsession starts

setxkbmap br -variant abnt2 2> $TMPDIR/setxkbmap.log &
#xscreensaver -no-splash 2> $TMPDIR/xscreensaver.log &
xrdb $HOME/.Xresources 2> $TMPDIR/xrdb.log &
#Pid_of_xrdb=$!
[ $(pgrep -x xbanish) ] || setsid xbanish &

[ $(pgrep urxvtd) ] || urxvtd -q -o -f &

([ $(pgrep ranmoize-bg)] && killall ramdomize-bg) || randomize-bg \
    2> $TMPDIR/wall.log &

compton --config=$XDG_CONFIG_HOME/compton/compton.conf \
    2> $TMPDIR/compton.log &
Pid_of_Compton=$!

if ps -p $Pid_of_Compton >/dev/null;then
    sleep 1
    conky > /dev/null &
fi

if ps -p $Pid_of_Compton > /dev/null;then
    bar &
fi

unset $Pid_of_Compton
